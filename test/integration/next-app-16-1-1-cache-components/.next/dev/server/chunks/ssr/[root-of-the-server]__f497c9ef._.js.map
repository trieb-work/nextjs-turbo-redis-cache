{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jannikzinkl/Documents/git/nextjs-turbo-redis-cache/test/integration/next-app-16-1-1-cache-components/src/app/cache-lab/runtime-data-suspense/page.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { Suspense } from 'react';\nimport { cookies } from 'next/headers';\n\nexport default function RuntimeDataSuspensePage() {\n  return (\n    <main className=\"mx-auto max-w-3xl p-10\">\n      <div className=\"mb-6\">\n        <Link\n          className=\"text-sm text-blue-600 hover:underline\"\n          href=\"/cache-lab\"\n        >\n          ← Back to Cache Lab\n        </Link>\n      </div>\n\n      <header className=\"mb-6\">\n        <h1 className=\"text-2xl font-semibold\">Runtime data + Suspense</h1>\n        <p className=\"mt-2 text-sm text-slate-600\">\n          This page reads <code>cookies()</code> at request time (runtime data),\n          then passes a value into a cached function. The runtime read is\n          wrapped in <code>{'<Suspense>'}</code> so it is an explicit dynamic\n          boundary.\n        </p>\n      </header>\n\n      <Suspense\n        fallback={\n          <div className=\"rounded-lg border bg-slate-50 p-5 text-sm text-slate-700\">\n            Loading runtime cookie…\n          </div>\n        }\n      >\n        <RuntimeCookieBlock />\n      </Suspense>\n\n      <div className=\"mt-6 rounded-lg border bg-slate-50 p-5 text-sm text-slate-700\">\n        <div className=\"space-y-2\">\n          <p>\n            Expected: changing the cookie changes the <em>input</em> to the\n            cached function, producing a different cache entry.\n          </p>\n          <p>\n            The cached function itself uses <code>use cache</code>, so for the\n            same cookie value, it should return a stable payload across reloads.\n          </p>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nasync function setCookie(value: string) {\n  'use server';\n  const store = await cookies();\n  store.set('cache_lab_session', value, { path: '/' });\n}\n\nasync function setCookieUserA() {\n  'use server';\n  await setCookie('user-a');\n}\n\nasync function setCookieUserB() {\n  'use server';\n  await setCookie('user-b');\n}\n\nasync function RuntimeCookieBlock() {\n  const store = await cookies();\n  const sessionId = store.get('cache_lab_session')?.value || 'anonymous';\n\n  return (\n    <div className=\"rounded-lg border p-5\">\n      <div className=\"mb-4 text-sm\">\n        <div>\n          <span className=\"font-medium\">cookie cache_lab_session:</span>{' '}\n          <span data-testid=\"cookie\" className=\"font-mono text-slate-700\">\n            {sessionId}\n          </span>\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-3 sm:flex-row\">\n        <form action={setCookieUserA}>\n          <button\n            className=\"w-full rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700\"\n            type=\"submit\"\n          >\n            Set cookie: user-a\n          </button>\n        </form>\n        <form action={setCookieUserB}>\n          <button\n            className=\"w-full rounded-md border border-blue-600 bg-white px-4 py-2 text-sm font-medium text-blue-700 hover:bg-blue-50\"\n            type=\"submit\"\n          >\n            Set cookie: user-b\n          </button>\n        </form>\n      </div>\n\n      <div className=\"mt-5\">\n        <CachedPerSession sessionId={sessionId} />\n      </div>\n    </div>\n  );\n}\n\nasync function CachedPerSession({ sessionId }: { sessionId: string }) {\n  'use cache';\n\n  const payload = {\n    sessionId,\n    createdAt: Date.now(),\n    random: Math.random(),\n  };\n\n  return (\n    <div className=\"rounded-md bg-slate-50 p-4 text-sm\">\n      <div className=\"font-medium\">Cached payload (keyed by sessionId)</div>\n      <pre data-testid=\"payload\" className=\"mt-2 overflow-x-auto text-xs\">\n        {JSON.stringify(payload, null, 2)}\n      </pre>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;6UAAA;AAEA;;;;;;;;AAEe,SAAS;IACtB,qBACE,+YAAC;QAAK,WAAU;;0BACd,+YAAC;gBAAI,WAAU;0BACb,cAAA,+YAAC,2VAAI;oBACH,WAAU;oBACV,MAAK;8BACN;;;;;;;;;;;0BAKH,+YAAC;gBAAO,WAAU;;kCAChB,+YAAC;wBAAG,WAAU;kCAAyB;;;;;;kCACvC,+YAAC;wBAAE,WAAU;;4BAA8B;0CACzB,+YAAC;0CAAK;;;;;;4BAAgB;0CAE3B,+YAAC;0CAAM;;;;;;4BAAoB;;;;;;;;;;;;;0BAK1C,+YAAC,kXAAQ;gBACP,wBACE,+YAAC;oBAAI,WAAU;8BAA2D;;;;;;0BAK5E,cAAA,+YAAC;;;;;;;;;;0BAGH,+YAAC;gBAAI,WAAU;0BACb,cAAA,+YAAC;oBAAI,WAAU;;sCACb,+YAAC;;gCAAE;8CACyC,+YAAC;8CAAG;;;;;;gCAAU;;;;;;;sCAG1D,+YAAC;;gCAAE;8CAC+B,+YAAC;8CAAK;;;;;;gCAAgB;;;;;;;;;;;;;;;;;;;;;;;;AAOlE;MAEA,wBAAA,eAAe,UAAU,KAAa;IAEpC,MAAM,QAAQ,MAAM,IAAA,2SAAO;IAC3B,MAAM,GAAG,CAAC,qBAAqB,OAAO;QAAE,MAAM;IAAI;AACpD;gZAJA;IAAe,YAAf;MAMA,wBAAA,eAAe;IAEb,MAAM,UAAU;AAClB;gZAHA;IAAe,iBAAf;MAKA,wBAAA,eAAe;IAEb,MAAM,UAAU;AAClB;gZAHA;IAAe,iBAAf;AAKA,eAAe;IACb,MAAM,QAAQ,MAAM,IAAA,2SAAO;IAC3B,MAAM,YAAY,MAAM,GAAG,CAAC,sBAAsB,SAAS;IAE3D,qBACE,+YAAC;QAAI,WAAU;;0BACb,+YAAC;gBAAI,WAAU;0BACb,cAAA,+YAAC;;sCACC,+YAAC;4BAAK,WAAU;sCAAc;;;;;;wBAAiC;sCAC/D,+YAAC;4BAAK,eAAY;4BAAS,WAAU;sCAClC;;;;;;;;;;;;;;;;;0BAKP,+YAAC;gBAAI,WAAU;;kCACb,+YAAC;wBAAK,QAAQ;kCACZ,cAAA,+YAAC;4BACC,WAAU;4BACV,MAAK;sCACN;;;;;;;;;;;kCAIH,+YAAC;wBAAK,QAAQ;kCACZ,cAAA,+YAAC;4BACC,WAAU;4BACV,MAAK;sCACN;;;;;;;;;;;;;;;;;0BAML,+YAAC;gBAAI,WAAU;0BACb,cAAA,+YAAC;oBAAiB,WAAW;;;;;;;;;;;;;;;;;AAIrC;AAEA,MAAA,6BAAA,eAAe,iBAAiB,EAAE,SAAS,EAAyB;IAGlE,MAAM,UAAU;QACd;QACA,WAAW,KAAK,GAAG;QACnB,QAAQ,KAAK,MAAM;IACrB;IAEA,qBACE,+YAAC;QAAI,WAAU;;0BACb,+YAAC;gBAAI,WAAU;0BAAc;;;;;;0BAC7B,+YAAC;gBAAI,eAAY;gBAAU,WAAU;0BAClC,KAAK,SAAS,CAAC,SAAS,MAAM;;;;;;;;;;;;AAIvC;IAjBA,4YAAA,SAAe;WAAf;;AAAA;;;;IAAe"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///Users/jannikzinkl/Documents/git/nextjs-turbo-redis-cache/test/integration/next-app-16-1-1-cache-components/.next-internal/server/app/cache-lab/runtime-data-suspense/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_1 as '0061977f6e93e5187064e2edfafb648ed774dd9ce4'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_2 as '00f8f03eaf9277b3640b23e3656191ed4120f35bbc'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_0 as '40fb903a669c054bc8b3495baf989f19b75378182f'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_CACHE_3 as 'c0ceb1e69096ea23f22222010d719df787340deed6'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}